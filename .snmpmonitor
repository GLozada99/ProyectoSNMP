#!/usr/bin/env python
from argparse import ArgumentParser
from subprocess import Popen
import os
#Parseador
parser = ArgumentParser(prog='snmpmonitor',description='Aplicación para monitoreo de equipos',usage='snmpmonitor [opción]')

#Argumentos
parser.add_argument('ip',
                    metavar='ip',
                    type=str, nargs='?',
                    help='IP del equipo para --add-interface')
parser.add_argument('community',
                    metavar='community',
                    type=str, nargs='?',
                    help='Community del equipo para --add-interface')
parser.add_argument('--add-interface',
                    action='store_true',
                    help='Añade interfaz al monitoreo (snmpmonitor --add-interface <ip> <community>)')
parser.add_argument('--add-rack',
                    action='store_true',
                    help='Añade rack')
parser.add_argument('--down-interfaces',
                    action='store_true',
                    help='Muestra las interfaces que se encuentran abajo actualmente')
parser.add_argument('--interfaces',
                    action='store_true',
                    help='Muestra las interfaces actuales en la lista de monitoreo y el rack donde se encuentran')
parser.add_argument('--log',
                    action='store_true',
                    help='Muestra las últimas 50 entradas del log')
parser.add_argument('--racks',
                    action='store_true',
                    help='Muestra los racks guardados')
parser.add_argument('--remove-interface',
                    action='store_true',
                    help='Elimina interfaz del monitoreo')
parser.add_argument('--remove-rack',
                    action='store_true',
                    help='Elimina rack y todas las interfaces que lo contienen')
parser.add_argument('--start',
                    action='store_true',
                    help='Inicia el monitoreo')
#Parseo de argumentos                       
args = parser.parse_args()

commands = {
    '--add-interface': '/home/pi/Documents/.Hidden/LuminariaSNMP/Interfaces/start.py',
    
}
commands['--add-interfaces'] = '/usr/bin/python3.7 /home/pi/Documents/.Hidden/LuminariaSNMP/Interfaces/start.py'


if args.start:
    Popen('/usr/bin/python3.7 /home/pi/Documents/.Hidden/LuminariaSNMP/Interfaces/start.py'.split())

 





'''
# Execute parse_args()

input_path = args.Path

if not os.path.isdir(input_path):
    print('The path specified does not exist')
    sys.exit()

for line in os.listdir(input_path):
    if args.longgg:  # Simplified long listing
        size = os.stat(os.path.join(input_path, line)).st_size
        line = '%10d  %s' % (size, line)
    print(line)
'''